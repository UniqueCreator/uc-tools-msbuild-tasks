<?xml version="1.0" encoding="utf-8"?>

<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <PropertyGroup>
        <UCToolsBuildTasks Condition="$(UCToolsBuildTasks) == ''">$(MSBuildThisFileDirectory)..\lib\native\UniqueCreator.Build.Tasks.dll</UCToolsBuildTasks>
    </PropertyGroup>

    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.GraphicsPipelineStateObject"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.ComputePipelineStateObject"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerPixel"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerVertex"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerCompute"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerDomain"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerHull"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerGeometry"/>
    <UsingTask AssemblyFile="$(UCToolsBuildTasks)" TaskName="UniqueCreator.Build.Tasks.FXCompilerRootSignature"/>

    <PropertyGroup>
        <AutoGeneratedGraphicsPipelineStateObjects Condition="$(AutoGeneratedGraphicsPipelineStateObjects) == ''">$(MSBuildThisFileDirectory)autogen\$(Platform)\$(ProjectName)shaders\</AutoGeneratedGraphicsPipelineStateObjects>
        <AutoGeneratedComputePipelineStateObjects Condition="$(AutoGeneratedGraphicsPipelineStateObjects) == ''">$(MSBuildThisFileDirectory)autogen\$(Platform)\$(ProjectName)shaders\</AutoGeneratedComputePipelineStateObjects>
        <AutoGeneratedDomainShaders Condition="$(AutoGeneratedDomainShaders) == ''">$(MSBuildThisFileDirectory)autogen\$(Platform)\$(ProjectName)shaders\</AutoGeneratedDomainShaders>
    </PropertyGroup>

    <ItemDefinitionGroup>
        <GraphicsPipelineStateObject>
            <EntryPointName>main</EntryPointName>
        </GraphicsPipelineStateObject>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <ComputePipelineStateObject>
            <EntryPointName>main</EntryPointName>
        </ComputePipelineStateObject>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <PixelShader>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </PixelShader>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <VertexShader>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </VertexShader>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <ComputeShader>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </ComputeShader>
    </ItemDefinitionGroup>

     <ItemDefinitionGroup>
        <DomainShader>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </DomainShader>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <HullShader>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </HullShader>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <GeometryShader>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </GeometryShader>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup>
        <RootSignature>
            <EntryPointName>main</EntryPointName>
            <PreprocessorDefinitions></PreprocessorDefinitions>
        </RootSignature>
    </ItemDefinitionGroup>

    <Target Name="UcToolsGenerateGraphicsItems" Condition="'@(GraphicsPipelineStateObject)' != ''">
        <CreateItem Include = "@(GraphicsPipelineStateObject)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedGraphicsPipelineStateObjects)%(GraphicsPipelineStateObject.EntryPointName).h;CPPOutput=$(AutoGeneratedGraphicsPipelineStateObjects)%(GraphicsPipelineStateObject.EntryPointName).cpp">
            <Output TaskParameter ="Include" ItemName = "GraphicsPipelineStateObjectBuilds"/>
        </CreateItem>
    </Target>   

     <Target Name="UcToolsGenerateComputeItems" Condition="'@(ComputePipelineStateObject)' != ''">
        <CreateItem Include = "@(ComputePipelineStateObject)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedComputePipelineStateObjects)%(ComputePipelineStateObject.EntryPointName).h;CPPOutput=$(AutoGeneratedComputePipelineStateObjects)%(ComputePipelineStateObject.EntryPointName).cpp">
            <Output TaskParameter ="Include" ItemName = "ComputePipelineStateObjectBuilds"/>
        </CreateItem>
    </Target>       

    <Target Name="UcToolsGeneratePixelShaderItems" Condition="'@(PixelShader)' != ''">
        <CreateItem Include = "@(PixelShader)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedPixelShaders)%(PixelShader.FileName).h;CPPOutput=$(AutoGeneratedPixelShaders)%(PixelShader.FileName).cpp;TypeName=%(PixelShader.FileName)">
            <Output TaskParameter ="Include" ItemName = "PixelShaderBuilds"/>
        </CreateItem>
    </Target>   

    <Target Name="UcToolsGenerateVertexShaderItems" Condition="'@(VertexShader)' != ''">
        <CreateItem Include = "@(VertexShader)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedVertexShaders)%(VertexShader.FileName).h;CPPOutput=$(AutoGeneratedVertexShaders)%(VertexShader.FileName).cpp;TypeName=%(VertexShader.FileName)">
            <Output TaskParameter ="Include" ItemName = "VertexShaderBuilds"/>
        </CreateItem>
    </Target>   

    <Target Name="UcToolsGenerateComputeShaderItems" Condition="'@(ComputeShader)' != ''">
        <CreateItem Include = "@(ComputeShader)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedComputeShaders)%(ComputeShader.FileName).h;CPPOutput=$(AutoGeneratedComputeShaders)%(ComputeShader.FileName).cpp;TypeName=%(ComputeShader.FileName)">
            <Output TaskParameter ="Include" ItemName = "ComputeShaderBuilds"/>
        </CreateItem>
    </Target>   

    <Target Name="UcToolsGenerateDomainShaderItems" Condition="'@(DomainShader)' != ''">
        <CreateItem Include = "@(DomainShader)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedDomainShaders)%(DomainShader.FileName).h;CPPOutput=$(AutoGeneratedDomainShaders)%(DomainShader.FileName).cpp;TypeName=%(DomainShader.FileName)">
            <Output TaskParameter ="Include" ItemName = "DomainShaderBuilds"/>
        </CreateItem>
    </Target>   

    <Target Name="UcToolsGenerateHullShaderItems" Condition="'@(HullShader)' != ''">
        <CreateItem Include = "@(HullShader)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedHullShaders)%(HullShader.FileName).h;CPPOutput=$(AutoGeneratedHullShaders)%(HullShader.FileName).cpp;TypeName=%(HullShader.FileName)">
            <Output TaskParameter ="Include" ItemName = "HullShaderBuilds"/>
        </CreateItem>
    </Target>       

    <Target Name="UcToolsGenerateGeometryShaderItems" Condition="'@(GeometryShader)' != ''">
        <CreateItem Include = "@(GeometryShader)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedGeometryShaders)%(GeometryShader.FileName).h;CPPOutput=$(AutoGeneratedGeometryShaders)%(GeometryShader.FileName).cpp;TypeName=%(GeometryShader.FileName)">
            <Output TaskParameter ="Include" ItemName = "GeometryShaderBuilds"/>
        </CreateItem>
    </Target>   

    <Target Name="UcToolsGenerateRootSignatureItems" Condition="'@(RootSignature)' != ''">
        <CreateItem Include = "@(RootSignature)" PreserveExistingMetadata="True" AdditionalMetadata="CPPHeaderOutput=$(AutoGeneratedRootSignatures)%(RootSignature.FileName).h;CPPOutput=$(AutoGeneratedRootSignatures)%(RootSignature.FileName).cpp;TypeName=%(RootSignature.FileName)">
            <Output TaskParameter ="Include" ItemName = "RootSignatureBuilds"/>
        </CreateItem>
    </Target>   

    <Target Name="UcToolsMakeDirsGraphics" DependsOnTargets="UcToolsGenerateGraphicsItems" Condition="'@(GraphicsPipelineStateObject)' != ''">

        <ItemGroup Condition="'@(GraphicsPipelineStateObject)'!=''">
          <Outputs Include="@(GraphicsPipelineStateObjectBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(GraphicsPipelineStateObjectBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>

     <Target Name="UcToolsMakeDirsCompute" DependsOnTargets="UcToolsGenerateComputeItems" Condition="'@(ComputePipelineStateObject)' != ''">

        <ItemGroup Condition="'@(ComputePipelineStateObject)'!=''">
          <Outputs Include="@(ComputePipelineStateObjectBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(ComputePipelineStateObjectBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>

    <Target Name="UcToolsMakeDirsPixelShader" DependsOnTargets="UcToolsGeneratePixelShaderItems" Condition="'@(PixelShader)' != ''">

        <ItemGroup Condition="'@(PixelShader)'!=''">
          <Outputs Include="@(PixelShaderBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(PixelShaderBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>

    <Target Name="UcToolsMakeDirsVertexShader" DependsOnTargets="UcToolsGenerateVertexShaderItems" Condition="'@(VertexShader)' != ''">

        <ItemGroup Condition="'@(VertexShader)'!=''">
          <Outputs Include="@(VertexShaderBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(VertexShaderBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>

    <Target Name="UcToolsMakeDirsComputeShader" DependsOnTargets="UcToolsGenerateComputeShaderItems" Condition="'@(ComputeShader)' != ''">

        <ItemGroup Condition="'@(ComputeShader)'!=''">
          <Outputs Include="@(ComputeShaderBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(ComputeShaderBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>


    <Target Name="UcToolsMakeDirsDomainShader" DependsOnTargets="UcToolsGenerateDomainShaderItems" Condition="'@(DomainShader)' != ''">

        <ItemGroup Condition="'@(DomainShader)'!=''">
          <Outputs Include="@(DomainShaderBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(DomainShaderBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>


    <Target Name="UcToolsMakeDirsHullShader" DependsOnTargets="UcToolsGenerateHullShaderItems" Condition="'@(HullShader)' != ''">

        <ItemGroup Condition="'@(HullShader)'!=''">
          <Outputs Include="@(HullShaderBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(HullShaderBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>

    <Target Name="UcToolsMakeDirsGeometryShader" DependsOnTargets="UcToolsGenerateGeometryShaderItems" Condition="'@(GeometryShader)' != ''">

        <ItemGroup Condition="'@(GeometryShader)'!=''">
          <Outputs Include="@(GeometryShaderBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(GeometryShaderBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>

    <Target Name="UcToolsMakeDirsRootSignature" DependsOnTargets="UcToolsGenerateRootSignatureItems" Condition="'@(RootSignature)' != ''">

        <ItemGroup Condition="'@(RootSignature)'!=''">
          <Outputs Include="@(RootSignatureBuilds->Metadata('CPPHeaderOutput')->Distinct())" />
          <Outputs Include="@(RootSignatureBuilds->Metadata('CPPOutput')->Distinct())" />
          <DirsToMake Include="@(Outputs->DirectoryName())" />
        </ItemGroup>

        <MakeDir Directories="@(DirsToMake)" />

        <ItemGroup>
            <DirsToMake Remove="@(DirsToMake)" />
        </ItemGroup>
    </Target>


    <Target Name="UcToolsGenerateGraphics" DependsOnTargets="UcToolsMakeDirsGraphics;UcToolsGenerateGraphicsItems" Condition="'@(GraphicsPipelineStateObject)' != ''">
        <GraphicsPipelineStateObject 
            Source                      ="%(GraphicsPipelineStateObjectBuilds.FullPath)" EntryPointName ="%(GraphicsPipelineStateObjectBuilds.EntryPointName)"
            CPPOutput                   ="%(GraphicsPipelineStateObjectBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(GraphicsPipelineStateObjectBuilds.CPPHeaderOutput)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineTool1Path)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineTool1Name)"
             >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </GraphicsPipelineStateObject>
    </Target>


    <Target Name="UcToolsGenerateCompute" DependsOnTargets="UcToolsMakeDirsCompute;UcToolsGenerateComputeItems" Condition="'@(ComputePipelineStateObject)' != ''">
        <ComputePipelineStateObject 
            Source                      ="%(ComputePipelineStateObjectBuilds.FullPath)" EntryPointName ="%(ComputePipelineStateObjectBuilds.EntryPointName)"
            CPPOutput                   ="%(ComputePipelineStateObjectBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(ComputePipelineStateObjectBuilds.CPPHeaderOutput)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineTool1Path)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineTool1Name)"
             >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </ComputePipelineStateObject>
    </Target>    

    <Target Name="UcToolsGeneratePixelShader" DependsOnTargets="UcToolsMakeDirsPixelShader;UcToolsGeneratePixelShaderItems" Condition="'@(PixelShader)' != ''">
        <FXCompilerPixel
            Source                      ="%(PixelShaderBuilds.FullPath)" EntryPointName ="%(PixelShaderBuilds.EntryPointName)"
            CPPOutput                   ="%(PixelShaderBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(PixelShaderBuilds.CPPHeaderOutput)"
            TypeName                    ="%(PixelShaderBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerPixel>
    </Target>    

    <Target Name="UcToolsGenerateVertexShader" DependsOnTargets="UcToolsMakeDirsVertexShader;UcToolsGenerateVertexShaderItems" Condition="'@(VertexShader)' != ''">
        <FXCompilerVertex
            Source                      ="%(VertexShaderBuilds.FullPath)" EntryPointName ="%(VertexShaderBuilds.EntryPointName)"
            CPPOutput                   ="%(VertexShaderBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(VertexShaderBuilds.CPPHeaderOutput)"
            TypeName                    ="%(VertexShaderBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerVertex>
    </Target>    

    <Target Name="UcToolsGenerateComputeShader" DependsOnTargets="UcToolsMakeDirsComputeShader;UcToolsGenerateComputeShaderItems" Condition="'@(ComputeShader)' != ''">
        <FXCompilerCompute
            Source                      ="%(ComputeShaderBuilds.FullPath)" EntryPointName ="%(ComputeShaderBuilds.EntryPointName)"
            CPPOutput                   ="%(ComputeShaderBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(ComputeShaderBuilds.CPPHeaderOutput)"
            TypeName                    ="%(ComputeShaderBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerCompute>
    </Target>    


    <Target Name="UcToolsGenerateDomainShader" DependsOnTargets="UcToolsMakeDirsDomainShader;UcToolsGenerateDomainShaderItems" Condition="'@(DomainShader)' != ''">
        <FXCompilerDomain
            Source                      ="%(DomainShaderBuilds.FullPath)" EntryPointName ="%(DomainShaderBuilds.EntryPointName)"
            CPPOutput                   ="%(DomainShaderBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(DomainShaderBuilds.CPPHeaderOutput)"
            TypeName                    ="%(DomainShaderBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerDomain>
    </Target>    

    <Target Name="UcToolsGenerateHullShader" DependsOnTargets="UcToolsMakeDirsHullShader;UcToolsGenerateHullShaderItems" Condition="'@(HullShader)' != ''">
        <FXCompilerHull
            Source                      ="%(HullShaderBuilds.FullPath)" EntryPointName ="%(HullShaderBuilds.EntryPointName)"
            CPPOutput                   ="%(HullShaderBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(HullShaderBuilds.CPPHeaderOutput)"
            TypeName                    ="%(HullShaderBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerHull>
    </Target>    


    <Target Name="UcToolsGenerateGeometryShader" DependsOnTargets="UcToolsMakeDirsGeometryShader;UcToolsGenerateGeometryShaderItems" Condition="'@(GeometryShader)' != ''">
        <FXCompilerGeometry
            Source                      ="%(GeometryShaderBuilds.FullPath)" EntryPointName ="%(GeometryShaderBuilds.EntryPointName)"
            CPPOutput                   ="%(GeometryShaderBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(GeometryShaderBuilds.CPPHeaderOutput)"
            TypeName                    ="%(GeometryShaderBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerGeometry>
    </Target>    

    <Target Name="UcToolsGenerateRootSignature" DependsOnTargets="UcToolsMakeDirsRootSignature;UcToolsGenerateRootSignatureItems" Condition="'@(RootSignature)' != ''">
        <FXCompilerDomain
            Source                      ="%(RootSignatureBuilds.FullPath)" EntryPointName ="%(RootSignatureBuilds.EntryPointName)"
            CPPOutput                   ="%(RootSignatureBuilds.CPPOutput)"
            CPPHeaderOutput             ="%(RootSignatureBuilds.CPPHeaderOutput)"
            TypeName                    ="%(RootSignatureBuilds.TypeName)"
            TrackerLogDirectory         ="$(TrackerLogDirectory)"
            ToolPath                    ="$(UCToolsGraphicsPipelineShaderCompilerPath)"
            ToolNameExtended            ="$(UCToolsGraphicsPipelineShaderCompilerName)"
            >
            <Output TaskParameter="CPPOutput"            ItemName="ClCompile" />
            <Output TaskParameter="CPPHeaderOutput"      ItemName="ClInclude" />
        </FXCompilerDomain>
    </Target>        

    <PropertyGroup>
        <PrepareForBuildDependsOn>
            UcToolsMakeDirsGraphics;
            UcToolsMakeDirsCompute;
            UcToolsMakeDirsPixelShader;
            UcToolsMakeDirsVertexShader;
            UcToolsMakeDirsComputeShader;
            UcToolsMakeDirsDomainShader;
            UcToolsMakeDirsHullShader;
            UcToolsMakeDirsGeometryShader;
            UcToolsMakeDirsRootSignature;
            $(PrepareForBuildBuildDependsOn)
        </PrepareForBuildDependsOn>

        <BeforeClCompileTargets>
            UcToolsGenerateGraphics;
            UcToolsGenerateCompute;
            UcToolsGeneratePixelShader;
            UcToolsGenerateVertexShader;
            UcToolsGenerateComputeShader;           
            UcToolsGenerateDomainShader;
            UcToolsGenerateHullShader;
            UcToolsGenerateGeometryShader;          
            UcToolsGenerateRootSignature;            
            $(BeforeClCompileTargets)
        </BeforeClCompileTargets>
    </PropertyGroup>

</Project>